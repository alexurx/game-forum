{% extends 'base.html' %}

{% block content %}
<div class="card" style="background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; margin-bottom: 2rem;">
    <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">{{ FORUM_CONFIG.name }}</h1>
    <p style="font-size: 1.1rem; opacity: 0.9;">{{ FORUM_CONFIG.description }}</p>
</div>

<h2 style="margin-bottom: 1rem;">Разделы форума</h2>

{% for category in categories %}
<div class="card" style="display: flex; justify-content: space-between; align-items: center;">
    <div style="flex: 1;">
        <h3 style="margin-bottom: 0.5rem;">
            <a href="{% url 'forum:category_detail' category.pk %}" style="color: var(--primary); text-decoration: none;">
                {{ category.name }}
            </a>
        </h3>
        <p style="color: var(--text-secondary); font-size: 0.9rem;">{{ category.description }}</p>
    </div>
    <div style="text-align: right; color: var(--text-secondary); font-size: 0.9rem;">
        <div>Тем: {{ category.topic_count }}</div>
        <a href="{% url 'forum:create_topic' category.pk %}" class="btn" style="margin-top: 0.5rem; font-size: 0.85rem; padding: 0.4rem 0.8rem;">
            Создать тему
        </a>
    </div>
</div>
{% empty %}
<div class="card">
    <p style="text-align: center; color: var(--text-secondary);">Разделов пока нет</p>
</div>
{% endfor %}

{% if recent_topics %}
<h2 style="margin-top: 2rem; margin-bottom: 1rem;">Последние темы</h2>
<div class="card">
    {% for topic in recent_topics %}
    <div class="padding: 0.75rem 0; {% if not forloop.last %}border-bottom: 1px solid var(--border);{% endif %}">
        <a href="{% url 'forum:topic_detail' topic.pk %}" style="color: var(--text-primary); text-decoration: none; font-weight: 500;">
            {{ topic.title }}
        </a>
        <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.25rem;">
            в <a href="{% url 'forum:category_detail' topic.category.pk %}" style="color: var(--primary); text-decoration: none;">{{ topic.category.name }}</a>
            от <a href="{% url 'users:profile' topic.author.username %}" style="color: var(--primary); text-decoration: none;">{{ topic.author.username }}</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}